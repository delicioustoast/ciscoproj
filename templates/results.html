<!doctype html>
<title>Subreddit results</title>
{% if subreddit %}
  <h1>Results for /r/{{ subreddit }}</h1>
{% else %}
  <h1>Hello World!</h1>
{% endif %}
<html>
  <head>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
    var daychartInfo = JSON.parse('{{ daychartInfo|tojson }}');
    var hourchartInfo = JSON.parse('{{ hourchartInfo|tojson }}');
    google.load('visualization', '1', {packages: ['corechart', 'bar']});
	google.setOnLoadCallback(drawCharts);

	function drawCharts() {

	      var data = new google.visualization.DataTable();
	      data.addColumn('string', 'Day');
	      data.addColumn('number', 'Page views');

	      data.addRows([
	        ['Sunday', daychartInfo['Sunday']],
	        ['Monday', daychartInfo['Monday']],
	        ['Tuesday', daychartInfo['Tuesday']],
	        ['Wednesday', daychartInfo['Wednesday']],
	        ['Thursday', daychartInfo['Thursday']],
	        ['Friday', daychartInfo['Friday']],
	        ['Saturday', daychartInfo['Saturday']],
	      ]);

	      var options = {
	        title: 'Subreddit Activity by Day',
	        hAxis: {
	          title: 'Day of week',
	        },
	        vAxis: {
	          title: 'Page views'
	        }
	      };

	      var data2 = new google.visualization.DataTable();
	      data2.addColumn('timeofday', 'Time of Day');
	      data2.addColumn('number', 'Page views');

	      for (var key in hourchartInfo) {
	      	if (hourchartInfo.hasOwnProperty(key)) {
	      		data2.addRow([[Number(key), 0, 0], hourchartInfo[key]]);
	      	}
	      }

	      var options2 = {
	        title: 'Subreddit Activity by Hour',
	        hAxis: {
	          title: 'Time of Day (GMT)',
	          format: 'h:mm a',
	          viewWindow: {
	            min: [0, -30, 0],
	            max: [23, 30, 0]
	          }
	        },
	        vAxis: {
	          title: 'Page views'
	        }
	      };

	      var chart = new google.visualization.ColumnChart(
	        document.getElementById('daychart_div'));
	      chart.draw(data, options);

	      var chart2 = new google.visualization.ColumnChart(
	        document.getElementById('hourchart_div'));
	      chart2.draw(data2, options2);
	    }
    </script>
  </head>
  <body>
    <div id="daychart_div"></div>
    <div id="hourchart_div"></div>
  </body>
</html>